input:
  DOMAIN: autodetect-fstab.local
  FIRST_NODE: true
  GPU_NODE: false
  CERT_OPTION: generate

mocks:
  addrootdevicetoconfig.statconfigfile:
    error: "no such file or directory"
  addrootdevicetoconfig.readfstab:
    output: |
      # /etc/fstab: static file system information.
      UUID=abc-123 / ext4 defaults 0 1
      UUID=def-456 /mnt/disk0 ext4 defaults,nofail 0 2 # managed by cluster-bloom
      UUID=ghi-789 /mnt/disk1 ext4 defaults,nofail 0 2 # managed by cluster-bloom
      /swap.img none swap sw 0 0
  addrootdevicetoconfig.blkiduuid.def-456:
    output: "/dev/nvme0n1"
    args: ["blkid", "-U", "def-456"]
  addrootdevicetoconfig.blkiduuid.ghi-789:
    output: "/dev/nvme1n1"
    args: ["blkid", "-U", "ghi-789"]

output:
  DOMAIN: autodetect-fstab.local
  FIRST_NODE: true
  GPU_NODE: false
  CERT_OPTION: generate
  CLUSTER_DISKS: "/dev/nvme0n1,/dev/nvme1n1"
