# tests/integration/step/10_PrepareRKE2Step/11-error-tls-san-duplicate-handling/bloom.yaml
# Test case: Duplicate TLS-SAN handling (auto-generated in additional list)
ENABLED_STEPS: PrepareRKE2Step
DOMAIN: test.local
FIRST_NODE: true
GPU_NODE: false
USE_CERT_MANAGER: false
CERT_OPTION: generate

ADDITIONAL_TLS_SAN_URLS:
  - "k8s.test.local"  # Duplicate of auto-generated
  - "api.test.local"

# Expected: Should handle duplicates gracefully
# Result: k8s.test.local (appears twice but certificates handle duplicates)

mocks:
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["iscsi_tcp"]
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["dm_mod"]
  PrepareRKE2.RunCommand.mkdir:
    output: ""
    args: ["-p", "/etc/rancher/rke2"]
  PrepareRKE2.RunCommand.chmod:
    output: ""
    args: ["0755", "/etc/rancher/rke2"]