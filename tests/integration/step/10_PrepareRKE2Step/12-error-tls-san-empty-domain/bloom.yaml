# tests/integration/step/10_PrepareRKE2Step/12-error-tls-san-empty-domain/bloom.yaml
# Test case: Empty domain behavior (should skip TLS-SAN generation)
ENABLED_STEPS: PrepareRKE2Step
# DOMAIN: ""  # Empty domain - not specified
FIRST_NODE: true
GPU_NODE: false

ADDITIONAL_TLS_SAN_URLS:
  - "api.example.com"

# Expected: Should skip TLS-SAN generation when DOMAIN is empty
# No TLS-SAN configuration should be added to RKE2 config

mocks:
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["iscsi_tcp"]
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["dm_mod"]
  PrepareRKE2.RunCommand.mkdir:
    output: ""
    args: ["-p", "/etc/rancher/rke2"]
  PrepareRKE2.RunCommand.chmod:
    output: ""
    args: ["0755", "/etc/rancher/rke2"]