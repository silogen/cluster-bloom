# tests/integration/step/10_PrepareRKE2Step/16-error-cert-existing-missing-files/bloom.yaml
# Test case: Error when existing certificate files don't exist
ENABLED_STEPS: PrepareRKE2Step
DOMAIN: test.local
FIRST_NODE: true
GPU_NODE: false
USE_CERT_MANAGER: false
CERT_OPTION: existing
TLS_CERT: "/nonexistent/cert.pem"
TLS_KEY: "/nonexistent/key.pem"

# Expected: Should fail with certificate file not found error
expected_error: "certificate file not found"

mocks:
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["iscsi_tcp"]
  PrepareRKE2.RunCommand.modprobe:
    output: ""
    args: ["dm_mod"]
  PrepareRKE2.RunCommand.mkdir:
    output: ""
    args: ["-p", "/etc/rancher/rke2"]
  PrepareRKE2.RunCommand.chmod:
    output: ""
    args: ["0755", "/etc/rancher/rke2"]